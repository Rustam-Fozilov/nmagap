{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: 'App',\n  data() {\n    return {\n      allMessages: [],\n      message: '',\n      username: localStorage.getItem('username')\n    };\n  },\n  beforeMount() {\n    if (!localStorage.getItem('username')) {\n      this.username = prompt('Ismingizni kiriting');\n      localStorage.setItem('username', this.username);\n    }\n    this.getAllMessages();\n  },\n  updated() {\n    this.$refs['autoScroll'].scrollTop = 9999999999;\n  },\n  methods: {\n    getAllMessages() {\n      try {\n        axios.get('https://vue-realtime-chat-a5aec-default-rtdb.firebaseio.com/messages.json').then(res => {\n          this.allMessages = Object.keys(res.data).map(key => {\n            return {\n              id: key,\n              ...res.data[key]\n            };\n          });\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    sendMessage() {\n      try {\n        axios.post('https://vue-realtime-chat-a5aec-default-rtdb.firebaseio.com/messages.json', {\n          text: this.message,\n          username: this.username\n        }).then(res => {\n          this.message = '';\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  },\n  watch: {\n    allMessages() {\n      this.getAllMessages();\n    }\n  }\n};","map":{"version":3,"mappings":"AA0BA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,KAAK;EAEXC,IAAI,GAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAEC,YAAY,CAACC,OAAO,CAAC,UAAU;IAC3C;EACF,CAAC;EAEDC,WAAW,GAAG;IACZ,IAAG,CAACF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,EAAE;MACpC,IAAI,CAACF,QAAO,GAAII,MAAM,CAAC,qBAAqB;MAE5CH,YAAY,CAACI,OAAO,CAAC,UAAU,EAAE,IAAI,CAACL,QAAQ,CAAC;IACjD;IAEA,IAAI,CAACM,cAAc,EAAE;EACvB,CAAC;EAEDC,OAAO,GAAG;IACR,IAAI,CAACC,KAAK,CAAC,YAAY,CAAC,CAACC,SAAQ,GAAI,UAAU;EACjD,CAAC;EAEDC,OAAO,EAAE;IACPJ,cAAc,GAAG;MACf,IAAI;QACFX,KAAI,CACCgB,GAAG,CAAC,2EAA2E,EAC/EC,IAAI,CAAEC,GAAG,IAAK;UACb,IAAI,CAACf,WAAU,GAAIgB,MAAM,CAACC,IAAI,CAACF,GAAG,CAAChB,IAAI,CAAC,CAACmB,GAAG,CAACC,GAAE,IAAK;YAClD,OAAO;cACLC,EAAE,EAAED,GAAG;cACP,GAAGJ,GAAG,CAAChB,IAAI,CAACoB,GAAG;YACjB;UACF,CAAC;QACH,CAAC;MAEP,EAAE,OAAOE,CAAC,EAAE;QACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;MAChB;IACF,CAAC;IAEDG,WAAW,GAAG;MACZ,IAAI;QACF3B,KAAI,CACC4B,IAAI,CAAC,2EAA2E,EAAE;UACjFC,IAAI,EAAE,IAAI,CAACzB,OAAO;UAClBC,QAAQ,EAAE,IAAI,CAACA;QACjB,CAAC,EACAY,IAAI,CAAEC,GAAG,IAAK;UACb,IAAI,CAACd,OAAM,GAAI,EAAC;QAClB,CAAC;MACP,EAAE,OAAOoB,CAAC,EAAE;QACVC,OAAO,CAACC,GAAG,CAACF,CAAC;MACf;IACF;EACF,CAAC;EAEDM,KAAK,EAAE;IACL3B,WAAW,GAAG;MACZ,IAAI,CAACQ,cAAc,EAAE;IACvB;EACF;AACF","names":["axios","name","data","allMessages","message","username","localStorage","getItem","beforeMount","prompt","setItem","getAllMessages","updated","$refs","scrollTop","methods","get","then","res","Object","keys","map","key","id","e","console","log","sendMessage","post","text","watch"],"sourceRoot":"","sources":["C:\\Users\\Rustam\\Desktop\\vue-realtime-chat\\src\\App.vue"],"sourcesContent":["<template>\n  <h1 style=\"text-align: center\">Realtime chat app</h1>\n  <div class=\"wrapper\">\n    <div class=\"chat\">\n      <div class=\"chat-messages\">\n        <div class=\"messages\" ref=\"autoScroll\">\n          <div v-for=\"message in allMessages\" :key=\"message.id\" class=\"message\" :class=\"this.username === message.username ? 'right' : ''\">\n            <p :class=\"this.username === message.username ? 'my-message' : ''\">{{ message.text }}</p>\n            <div><span>{{ message.username }}</span></div>\n          </div>\n        </div>\n        <form>\n          <textarea\n              @keyup.enter=\"sendMessage\"\n              v-model=\"message\"\n              placeholder=\"Type message and click Enter to send\"\n              class=\"form-control\"\n              rows=\"3\"\n          ></textarea>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: 'App',\n\n  data() {\n    return {\n      allMessages: [],\n      message: '',\n      username: localStorage.getItem('username'),\n    }\n  },\n\n  beforeMount() {\n    if(!localStorage.getItem('username')) {\n      this.username = prompt('Ismingizni kiriting')\n\n      localStorage.setItem('username', this.username);\n    }\n\n    this.getAllMessages();\n  },\n\n  updated() {\n    this.$refs['autoScroll'].scrollTop = 9999999999;\n  },\n\n  methods: {\n    getAllMessages() {\n      try {\n        axios\n            .get('https://vue-realtime-chat-a5aec-default-rtdb.firebaseio.com/messages.json')\n            .then((res) => {\n              this.allMessages = Object.keys(res.data).map(key => {\n                return {\n                  id: key,\n                  ...res.data[key]\n                }\n              })\n            })\n\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    sendMessage() {\n      try {\n        axios\n            .post('https://vue-realtime-chat-a5aec-default-rtdb.firebaseio.com/messages.json', {\n              text: this.message,\n              username: this.username\n            })\n            .then((res) => {\n              this.message = ''\n            })\n      } catch (e) {\n        console.log(e)\n      }\n    }\n  },\n\n  watch: {\n    allMessages() {\n      this.getAllMessages();\n    }\n  }\n}\n</script>\n\n<style>\nhtml,\nbody {\n  font-family: Arial, Helvetica, sans-serif;\n  background-color: #f2f2f5;\n}\n\n.my-message {\n  background-color: #C8CEDE !important;\n}\n\n.right {\n  display: flex;\n  justify-content: end;\n  flex-direction: column;\n  place-items: flex-end;\n}\n\n.wrapper {\n  width: 700px;\n  margin: 70px auto;\n}\n\n.chat {\n  background-color: white;\n  border-radius: 20px;\n  height: 600px;\n  padding: 30px;\n  width: 100%;\n}\n\n.chat-messages {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n  flex: 1;\n}\n\n.messages {\n  flex: 1;\n  overflow: auto;\n}\n\n.message {\n  margin-bottom: 20px;\n}\n\n.message p {\n  display: inline-flex;\n  border-radius: 8px;\n  background-color: #f2f2f5;\n  padding: 12px 20px;\n  margin: 0;\n}\n\n.message span {\n  opacity: 0.5;\n  font-size: 14px;\n}\n\n.chat-messages form {\n  margin-top: 20px;\n  padding-top: 20px;\n  width: 100%;\n  border-top: 1px solid rgb(200, 200, 200);\n}\n\n.chat-messages form textarea {\n  width: 680px;\n  resize: none;\n  outline: none;\n  border: none;\n  background-color: #f5f5f5;\n  border-radius: 10px;\n  padding: 10px;\n  height: 80px;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 16px;\n}\n\n.btn-primary {\n  padding: 12px 35px;\n  margin-top: 10px;\n  border: none;\n  font-size: 16px;\n  border-radius: 10px;\n  background: #151515;\n  color: white;\n  cursor: pointer;\n}\n\n@media only screen and (max-width: 900px){\n  .wrapper {\n    width: 100%;\n    margin: 40px auto;\n  }\n\n  .chat {\n    width: 80%;\n    margin: 0 auto;\n    height: 500px;\n  }\n\n  .chat-messages form textarea {\n    width: 97%;\n  }\n}\n\n@media only screen and (max-width: 500px){\n  .chat-messages form textarea {\n    width: 96%;\n  }\n\n  .wrapper {\n    margin: 20px auto;\n  }\n\n  .chat {\n    height: 450px;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}